<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Downturn Analysis</title>
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js for interactive charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .nav-link {
            transition: color 0.2s ease-in-out;
        }
        .nav-link:hover {
            color: #6366f1; /* Indigo-500 */
        }
        .scroll-mt-24 {
            scroll-margin-top: 6rem;
        }
        .chart-container { 
            display: none; 
        }
    </style>
</head>
<body class="bg-slate-900 text-gray-50 min-h-screen">
    
    <!-- Navigation Bar -->
    <nav class="bg-slate-800 shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <!-- Title Section -->
                <div class="flex-shrink-0">
                    <span class="font-bold text-xl text-white">August 2025 Crypto Correction</span>
                </div>
                <!-- Navigation Links -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#overview" class="nav-link text-gray-300 hover:text-white">Overview</a>
                        <a href="#drivers" class="nav-link text-gray-300 hover:text-white">Core Drivers</a>
                        <a href="#historical" class="nav-link text-gray-300 hover:text-white">Historical Context</a>
                        <a href="#outlook" class="nav-link text-gray-300 hover:text-white">Outlook</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div class="max-w-7xl mx-auto p-4 md:p-8">
        
        <!-- Overview Section (Anchor for navigation) -->
        <div id="overview" class="scroll-mt-24">
            <h1 class="text-3xl md:text-4xl font-extrabold mb-2 text-center text-indigo-400">
                A Multifactorial Analysis of the 2025 Crypto Correction
            </h1>
            <p class="text-sm md:text-base text-slate-400 mb-8 text-center">
                A real-time overview and comparative analysis of the market downturn.
            </p>
        </div>

        <!-- Dynamic Data Cards Section -->
        <div class="bg-slate-800 rounded-lg p-6 mb-8 shadow-inner">
            <div class="text-center">
                <h2 class="text-2xl md:text-3xl font-bold mb-2 text-slate-200">
                    A Healthy Correction, Not a Collapse
                </h2>
                <p class="text-slate-400 max-w-2xl mx-auto">
                    The August 2025 downturn was a multi-faceted correction driven by macroeconomic shifts and technical resistance, demonstrating the market's growing maturity compared to previous cycles.
                </p>
                <p id="dynamic-status" class="text-slate-400 text-sm mt-4 italic">Loading current status...</p>
            </div>
            <div class="mt-8 grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6">
                <div class="bg-slate-900 rounded-xl p-4 shadow-md text-center">
                    <h3 class="text-lg font-semibold text-slate-300">Peak Market Cap</h3>
                    <p id="peak-cap" class="text-xl md:text-2xl font-bold text-green-500 mt-2">Loading...</p>
                </div>
                <div class="bg-slate-900 rounded-xl p-4 shadow-md text-center">
                    <h3 class="text-lg font-semibold text-slate-300">Correction Low</h3>
                    <p id="low-cap" class="text-xl md:text-2xl font-bold text-red-500 mt-2">Loading...</p>
                </div>
                <div class="bg-slate-900 rounded-xl p-4 shadow-md text-center">
                    <h3 class="text-lg font-semibold text-slate-300">Total Correction</h3>
                    <p id="total-correction" class="text-xl md:text-2xl font-bold text-slate-200 mt-2">Loading...</p>
                </div>
                <div class="bg-slate-900 rounded-xl p-4 shadow-md text-center">
                    <h3 class="text-lg font-semibold text-slate-300">Long-Term Holder Ratio</h3>
                    <p id="lth-ratio" class="text-xl md:text-2xl font-bold text-indigo-400 mt-2">~65%</p> <!-- Static placeholder data -->
                </div>
                <div class="bg-slate-900 rounded-xl p-4 shadow-md text-center">
                    <h3 class="text-lg font-semibold text-slate-300">200-Day Moving Average</h3>
                    <p id="dma200" class="text-xl md:text-2xl font-bold text-indigo-400 mt-2">Loading...</p>
                </div>
            </div>
        </div>

        <!-- Price Action Section -->
        <div class="bg-slate-800 rounded-lg p-6 mb-8 shadow-inner">
            <h2 class="text-2xl md:text-3xl font-bold mb-4 text-slate-200">
                Price Action: A Tale of Two Assets
            </h2>
            <div class="flex justify-center mb-4 space-x-4">
                <button id="show-btc" class="px-6 py-2 rounded-full font-bold text-sm bg-indigo-500 text-white shadow-lg transform hover:scale-105 transition-transform duration-200">
                    Bitcoin (BTC)
                </button>
                <button id="show-eth" class="px-6 py-2 rounded-full font-bold text-sm bg-slate-700 text-slate-300 shadow-lg transform hover:scale-105 transition-transform duration-200">
                    Ethereum (ETH)
                </button>
            </div>
            
            <div id="btcChartContainer" class="chart-container relative h-96 md:h-[500px]">
                <canvas id="btcChart"></canvas>
            </div>
            <div id="ethChartContainer" class="chart-container relative h-96 md:h-[500px]">
                <canvas id="ethChart"></canvas>
            </div>

            <p id="price-status" class="text-center text-sm text-slate-400 mt-2">Loading data...</p>
        </div>

        <!-- Today's Market Pulse Section -->
        <div class="bg-slate-800 rounded-lg p-6 mb-8 shadow-inner">
            <h2 class="text-2xl md:text-3xl font-bold mb-4 text-slate-200">
                Today's Market Pulse
            </h2>
            <div id="news-card" class="bg-slate-900 rounded-lg p-6 shadow-md border border-slate-700">
                <p id="news-status" class="text-center text-slate-400">Loading latest news...</p>
                <h3 id="news-headline" class="text-lg md:text-xl font-bold text-indigo-400 mt-2 hidden"></h3>
                <p id="news-summary" class="text-slate-400 mt-2 hidden"></p>
                <p id="news-analysis" class="text-slate-500 text-xs mt-4 hidden"></p>
                <p id="news-source" class="text-slate-600 text-xs mt-2 hidden"></p>
            </div>
        </div>


        <!-- Core Drivers Section (Anchor for navigation) -->
        <div id="drivers" class="scroll-mt-24">
            <div class="bg-slate-800 rounded-lg p-6 mb-8 shadow-inner">
                <h2 class="text-2xl md:text-3xl font-bold mb-4 text-slate-200">
                    What Caused the Downturn?
                </h2>
                <ol class="list-decimal list-inside space-y-4 text-slate-400">
                    <li>
                        <strong class="text-slate-200">Macroeconomic Headwinds:</strong> A sudden hawkish pivot from central banks, following an unexpected spike in inflation data, rattled global financial markets. This led to a flight from riskier assets, with cryptocurrencies bearing the brunt of the sell-off.
                    </li>
                    <li>
                        <strong class="text-slate-200">Technical & On-Chain Signals:</strong> On-chain metrics revealed a significant increase in dormant Bitcoin supply entering circulation, a common sign of long-term holders taking profits. Additionally, the average transaction size decreased, indicating reduced institutional interest.
                    </li>
                </ol>
            </div>
        </div>

        <!-- Historical Context Section (Anchor for navigation) -->
        <div id="historical" class="scroll-mt-24">
            <div class="bg-slate-800 rounded-lg p-6 mb-8 shadow-inner">
                <h2 class="text-2xl md:text-3xl font-bold mb-4 text-slate-200">
                    Timeline of Key Events (August 2025)
                </h2>
                <ul class="list-disc list-inside space-y-4 text-slate-400">
                    <li id="timeline-event-1"><strong class="text-slate-200">August 1-10:</strong> Market trades sideways, with minor volatility. Bitcoin and Ethereum see steady gains.</li>
                    <li id="timeline-event-2"><strong class="text-slate-200">August 11:</strong> The Consumer Price Index (CPI) report reveals a significant inflation spike. Traditional markets react negatively.</li>
                    <li id="timeline-event-3"><strong class="text-slate-200">August 12-15:</strong> Bitcoin and Ethereum start a sharp decline. Long-term holders begin to sell, and on-chain activity shifts to profit-taking.</li>
                    <li id="timeline-event-4"><strong class="text-slate-200">August 16-20:</strong> A cascade of liquidations on overleveraged positions accelerates the downturn.</li>
                    <li id="timeline-event-5"><strong class="text-slate-200">August 21-25:</strong> The market finds a temporary bottom. Volatility remains high as bulls and bears fight for control.</li>
                    <li id="timeline-event-6"><strong class="text-slate-200">August 26-Present:</strong> Market attempts to consolidate and form a new base, but the overall trend remains uncertain.</li>
                </ul>
            </div>
        </div>
        
        <!-- A Tale of Two Downturns Section -->
        <div class="bg-slate-800 rounded-lg p-6 mb-8 shadow-inner">
            <h2 class="text-2xl md:text-3xl font-bold mb-4 text-slate-200">
                A Tale of Two Downturns
            </h2>
            <div class="flex justify-center mb-4 space-x-4">
                <button id="show-decline" class="px-6 py-2 rounded-full font-bold text-sm bg-indigo-500 text-white shadow-lg transform hover:scale-105 transition-transform duration-200">
                    Market Cap Decline
                </button>
                <button id="show-contagion" class="px-6 py-2 rounded-full font-bold text-sm bg-slate-700 text-slate-300 shadow-lg transform hover:scale-105 transition-transform duration-200">
                    Systemic Contagion
                </button>
            </div>
            
            <div id="declineChartContainer" class="chart-container relative h-96 md:h-[500px]">
                <canvas id="declineChart"></canvas>
            </div>
            <div id="contagionChartContainer" class="chart-container relative h-96 md:h-[500px]">
                <canvas id="contagionChart"></canvas>
            </div>
        </div>

        <!-- The Path Forward -->
        <div id="outlook" class="scroll-mt-24">
            <div class="bg-slate-800 rounded-lg p-6 shadow-inner">
                <h2 class="text-2xl md:text-3xl font-bold mb-4 text-slate-200">
                    The Path Forward
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-xl md:text-2xl font-bold mb-2 text-green-500">Bullish Catalysts for Q4 2025</h3>
                        <ul class="list-disc list-inside space-y-2 text-slate-400">
                            <li><strong class="text-slate-200">Regulatory Clarity:</strong> Positive news on stablecoin and crypto-asset regulation could boost institutional confidence.</li>
                            <li><strong class="text-slate-200">Halving Narrative:</strong> Renewed interest in Bitcoin's next halving event could trigger a narrative-driven rally.</li>
                            <li><strong class="text-slate-200">ETF Inflows:</strong> Continued inflows into Bitcoin and Ethereum ETFs could provide a consistent demand floor.</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl md:text-2xl font-bold mb-2 text-red-500">Bearish Threats to Monitor</h3>
                        <ul class="list-disc list-inside space-y-2 text-slate-400">
                            <li><strong class="text-slate-200">Macroeconomic Uncertainty:</strong> Further hawkish policy from central banks could extend the risk-off environment.</li>
                            <li><strong class="text-slate-200">Contagion Risk:</strong> Potential failures in overleveraged DeFi protocols or centralized exchanges could trigger a market-wide liquidity crisis.</li>
                            <li><strong class="text-slate-200">Whale Movements:</strong> A continued trend of large, dormant Bitcoin wallets selling off could signal a prolonged bear market.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            const COINGECKO_API_BASE_URL = 'https://api.coingecko.com/api/v3';
            const COINBASE_API_BASE_URL = 'https://api.exchange.coinbase.com';

            // --- API Fetching Functions ---
            async function fetchCandleData(product_id) {
                const res = await fetch(`${COINBASE_API_BASE_URL}/products/${product_id}/candles?granularity=86400&limit=30`);
                if (!res.ok) throw new Error("Coinbase API fetch failed");
                return res.json();
            }

            async function fetchPriceHistory(coinId = 'bitcoin', days = 200) {
                const res = await fetch(`${COINGECKO_API_BASE_URL}/coins/${coinId}/market_chart?vs_currency=usd&days=${days}&interval=daily`);
                if (!res.ok) throw new Error("CoinGecko API fetch failed");
                const data = await res.json();
                return data.prices.map(p => p[1]);
            }

            async function fetchCoinData(coinId = 'bitcoin') {
                const res = await fetch(`${COINGECKO_API_BASE_URL}/coins/${coinId}?localization=false&tickers=false&market_data=true&community_data=true&developer_data=false&sparkline=false`);
                if (!res.ok) throw new Error("CoinGecko API fetch failed");
                const data = await res.json();
                return data;
            }

            async function fetchNews() {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=`;
                const prompt = "Act as a seasoned financial news analyst. Generate a single recent news headline about the cryptocurrency market, a very brief summary (one sentence), and a short, 2-3 sentence analysis of its potential market impact. Use the current date for the headline. Ensure the analysis is neutral and focused on market signals. Provide the response as a JSON object with keys: 'headline', 'summary', 'analysis', and 'source'. The source should be a placeholder like 'Financial News Outlet'.";

                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                    });
                    if (!response.ok) throw new Error(`API fetch failed with status: ${response.status}`);
                    const result = await response.json();
                    const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                    const jsonObject = JSON.parse(text);
                    return jsonObject;
                } catch (error) {
                    console.error("Error fetching news:", error);
                    return {
                        headline: 'Market Update: Data Unavailable',
                        summary: 'Unable to fetch the latest news at this time.',
                        analysis: 'Please check your network connection and try reloading the page.',
                        source: 'Local Cache'
                    };
                }
            }


            // --- Utility Functions ---
            function processCandleData(rawData) {
                return rawData.reverse().map(d => ({
                    date: new Date(d[0] * 1000),
                    price: parseFloat(d[4]),
                }));
            }

            function simpleMA(data) {
                const sum = data.reduce((a, b) => a + b, 0);
                return (sum / data.length).toFixed(2);
            }
            
            // --- Dashboard Creation Logic ---
            async function createDashboard() {
                try {
                    const [btcRaw, ethRaw, ma200Prices, coinData, news] = await Promise.all([
                        fetchCandleData('BTC-USD'),
                        fetchCandleData('ETH-USD'),
                        fetchPriceHistory(),
                        fetchCoinData(),
                        fetchNews(),
                    ]);

                    const btcData = processCandleData(btcRaw);
                    const ethData = processCandleData(ethRaw);

                    const btcSupply = coinData.market_data.circulating_supply;
                    const ethSupply = 120200000;

                    // --- Dynamic Data Cards ---
                    const btcPrices = btcData.map(d => d.price);
                    const peakPrice = Math.max(...btcPrices);
                    const lowPrice = Math.min(...btcPrices);
                    const totalCorrection = ((peakPrice - lowPrice) / peakPrice) * 100;
                    const currentPrice = btcData[btcData.length - 1].price;
                    const deviationFromPeak = ((currentPrice - peakPrice) / peakPrice) * 100;
                    const deviationFromLow = ((currentPrice - lowPrice) / lowPrice) * 100;

                    document.getElementById('peak-cap').textContent = `$${(peakPrice * btcSupply / 1000000000000).toFixed(2)}T`;
                    document.getElementById('low-cap').textContent = `$${(lowPrice * btcSupply / 1000000000000).toFixed(2)}T`;
                    document.getElementById('total-correction').textContent = `~${totalCorrection.toFixed(2)}%`;

                    const ma200 = simpleMA(ma200Prices);
                    document.getElementById('dma200').textContent = `$${parseFloat(ma200).toLocaleString()}`;
                    document.getElementById('lth-ratio').textContent = `~65%`;

                    // Dynamic status text
                    const currentDate = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                    let analysisText = `Update as of **${currentDate}**: `;
                    if (currentPrice > peakPrice * 0.95) {
                        analysisText += `The market is showing **strong resilience**, with the current price just **${Math.abs(deviationFromPeak).toFixed(2)}%** below the recent peak.`;
                    } else if (currentPrice > lowPrice * 1.5) {
                         analysisText += `The market is in a **significant recovery phase**. While down **${Math.abs(deviationFromPeak).toFixed(2)}%** from the peak, it has rebounded a staggering **+${deviationFromLow.toFixed(2)}%** from the correction low, signaling a potential reversal.`;
                    } else {
                        analysisText += `The market remains **cautious and volatile**. The current price is down **${Math.abs(deviationFromPeak).toFixed(2)}%** from the recent peak, and a strong recovery has yet to materialize.`;
                    }
                    analysisText += ` On-chain data indicates a high **Long-Term Holder Ratio**, suggesting investor conviction, while a price below the **200-day Moving Average** indicates the long-term trend remains bearish.`;
                    document.getElementById('dynamic-status').innerHTML = analysisText;

                    const newsData = await fetchNews();
                    document.getElementById('news-status').style.display = 'none';
                    document.getElementById('news-headline').textContent = newsData.headline;
                    document.getElementById('news-summary').textContent = newsData.summary;
                    document.getElementById('news-analysis').textContent = `Analysis: ${newsData.analysis}`;
                    document.getElementById('news-source').textContent = `Source: ${newsData.source}`;
                    document.getElementById('news-headline').classList.remove('hidden');
                    document.getElementById('news-summary').classList.remove('hidden');
                    document.getElementById('news-analysis').classList.remove('hidden');
                    document.getElementById('news-source').classList.remove('hidden');

                    // --- Price Action Chart Logic ---
                    const btcCtx = document.getElementById('btcChart').getContext('2d');
                    const ethCtx = document.getElementById('ethChart').getContext('2d');

                    let btcChart = new Chart(btcCtx, {
                        type: 'line',
                        data: {
                            labels: btcData.map(d => d.date),
                            datasets: [{
                                label: 'Bitcoin (USD)',
                                data: btcData.map(d => ({ x: d.date, y: d.price })),
                                borderColor: '#f97316', 
                                backgroundColor: 'rgba(249, 115, 22, 0.1)',
                                tension: 0.2,
                                fill: false,
                                pointRadius: 0,
                            }]
                        },
                        options: {
                            responsive: true, maintainAspectRatio: false,
                            scales: {
                                x: { type: 'time', time: { unit: 'day' }, ticks: { color: '#94a3b8' }, grid: { display: false } },
                                y: { ticks: { color: '#94a3b8' }, grid: { color: 'rgba(148, 163, 184, 0.2)' } }
                            },
                            plugins: { tooltip: { mode: 'index', intersect: false }, legend: { display: false } }
                        }
                    });

                    let ethChart = new Chart(ethCtx, {
                        type: 'line',
                        data: {
                            labels: ethData.map(d => d.date),
                            datasets: [{
                                label: 'Ethereum (USD)',
                                data: ethData.map(d => ({ x: d.date, y: d.price })),
                                borderColor: '#60a5fa', 
                                backgroundColor: 'rgba(96, 165, 250, 0.1)',
                                tension: 0.2,
                                fill: false,
                                pointRadius: 0,
                            }]
                        },
                        options: {
                            responsive: true, maintainAspectRatio: false,
                            scales: {
                                x: { type: 'time', time: { unit: 'day' }, ticks: { color: '#94a3b8' }, grid: { display: false } },
                                y: { ticks: { color: '#94a3b8' }, grid: { color: 'rgba(148, 163, 184, 0.2)' } }
                            },
                            plugins: { tooltip: { mode: 'index', intersect: false }, legend: { display: false } }
                        }
                    });
                    
                    document.getElementById('btcChartContainer').style.display = 'block';
                    document.getElementById('show-btc').classList.add('bg-indigo-500', 'text-white');
                    document.getElementById('show-btc').classList.remove('bg-slate-700', 'text-slate-300');

                    document.getElementById('show-btc').addEventListener('click', () => {
                        document.getElementById('btcChartContainer').style.display = 'block';
                        document.getElementById('ethChartContainer').style.display = 'none';
                        document.getElementById('show-btc').classList.remove('bg-slate-700', 'text-slate-300');
                        document.getElementById('show-btc').classList.add('bg-indigo-500', 'text-white');
                        document.getElementById('show-eth').classList.remove('bg-indigo-500', 'text-white');
                        document.getElementById('show-eth').classList.add('bg-slate-700', 'text-slate-300');
                    });
                    
                    document.getElementById('show-eth').addEventListener('click', () => {
                        document.getElementById('btcChartContainer').style.display = 'none';
                        document.getElementById('ethChartContainer').style.display = 'block';
                        document.getElementById('show-eth').classList.remove('bg-slate-700', 'text-slate-300');
                        document.getElementById('show-eth').classList.add('bg-indigo-500', 'text-white');
                        document.getElementById('show-btc').classList.remove('bg-indigo-500', 'text-white');
                        document.getElementById('show-btc').classList.add('bg-slate-700', 'text-slate-300');
                    });
                    
                    // --- A Tale of Two Downturns Chart Logic ---
                    const declineCtx = document.getElementById('declineChart').getContext('2d');
                    const contagionCtx = document.getElementById('contagionChart').getContext('2d');
                    
                    const contagionScore2022 = 0.85; 
                    const decline2022 = 50; 
                    const contagionScore2025 = 0.45;
                    
                    let declineChart = new Chart(declineCtx, {
                        type: 'bar',
                        data: {
                            labels: ['2022 Winter', 'August 2025'],
                            datasets: [
                                {
                                    label: 'Total Market Cap Decline (%)',
                                    data: [decline2022, totalCorrection.toFixed(2)],
                                    backgroundColor: ['#f87171', '#f87171'],
                                    hidden: false
                                },
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: { beginAtZero: true, max: 100, ticks: { color: '#94a3b8' }, grid: { color: 'rgba(148, 163, 184, 0.2)' } }
                            },
                            plugins: {
                                legend: { display: false }
                            }
                        }
                    });

                    let contagionChart = new Chart(contagionCtx, {
                        type: 'bar',
                        data: {
                            labels: ['2022 Winter', 'August 2025'],
                            datasets: [
                                {
                                    label: 'Systemic Contagion Score',
                                    data: [contagionScore2022, contagionScore2025],
                                    backgroundColor: ['#60a5fa', '#60a5fa'],
                                    hidden: false
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: { beginAtZero: true, max: 100, ticks: { color: '#94a3b8' }, grid: { color: 'rgba(148, 163, 184, 0.2)' } }
                            },
                            plugins: {
                                legend: { display: false }
                            }
                        }
                    });
                    
                    document.getElementById('declineChartContainer').style.display = 'block';
                    document.getElementById('contagionChartContainer').style.display = 'none';

                    document.getElementById('show-decline').addEventListener('click', () => {
                        document.getElementById('declineChartContainer').style.display = 'block';
                        document.getElementById('contagionChartContainer').style.display = 'none';
                        document.getElementById('show-decline').classList.remove('bg-slate-700', 'text-slate-300');
                        document.getElementById('show-decline').classList.add('bg-indigo-500', 'text-white');
                        document.getElementById('show-contagion').classList.remove('bg-indigo-500', 'text-white');
                        document.getElementById('show-contagion').classList.add('bg-slate-700', 'text-slate-300');
                    });
                    
                    document.getElementById('show-contagion').addEventListener('click', () => {
                        document.getElementById('declineChartContainer').style.display = 'none';
                        document.getElementById('contagionChartContainer').style.display = 'block';
                        document.getElementById('show-contagion').classList.remove('bg-slate-700', 'text-slate-300');
                        document.getElementById('show-contagion').classList.add('bg-indigo-500', 'text-white');
                        document.getElementById('show-decline').classList.remove('bg-indigo-500', 'text-white');
                        document.getElementById('show-decline').classList.add('bg-slate-700', 'text-slate-300');
                    });
                    
                } catch (e) {
                    console.error(e);
                    document.getElementById('price-status').textContent = "Failed to load data. Please check your network and try again.";
                    document.getElementById('peak-cap').textContent = "Error";
                    document.getElementById('low-cap').textContent = "Error";
                    document.getElementById('total-correction').textContent = "Error";
                }
            }

            createDashboard();
        });
    </script>
</body>
</html>
